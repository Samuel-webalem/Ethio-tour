{"mappings":"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","sources":["public/js/index.js","public/js/updateSetting.js","public/js/alerts.js","public/js/stripe.js","public/js/login.js","public/js/mapbox.js","public/js/signup.js"],"sourcesContent":["/* eslint-disable */\r\nimport { updateSetting } from './updateSetting';\r\nimport { bookTour } from './stripe';\r\nimport {login} from './login'\r\nimport { displayMap } from './mapbox';\r\nimport { signup } from './signup';\r\n\r\nconst bookBtn = document.getElementById('book-tour');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nconst loginForm = document.querySelector('.formlog');\r\nconst logoutbtn = document.querySelector('.nav__el--logout');\r\nconst mapbox = document.getElementById('map');\r\nconst signinForm = document.querySelector('.formsign');\r\n\r\n\r\nif (mapbox) {\r\n  const locations = JSON.parse(mapbox.dataset.locations);\r\n  displayMap(locations)\r\n}\r\n\r\nif (signinForm) {\r\n  signinForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const name = document.getElementById('name').value;\r\n    const passwordConfirm = document.getElementById('passwordconfirm').value;\r\n    signup(email, password, name, passwordConfirm);\r\n  })\r\n}\r\n\r\n// if (loginForm) {\r\n//   loginForm.addEventListener('submit', async (e) => { \r\n//     e.preventDefault();\r\n//     const email = document.getElementById('email').value;\r\n//     const password = document.getElementById('password').value;\r\n//     login(email,password)\r\n//   })\r\n// }\r\n\r\nif (userDataForm) {\r\n  userDataForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData();\r\n    form.append('email', document.getElementById('email').value);\r\n    form.append('name', document.getElementById('name').value);\r\n    form.append('photo', document.getElementById('photo').files[0]);\r\n\r\n    seter.src = updateSetting(form, 'data');\r\n  });\r\n}\r\n\r\nif (userPasswordForm) {\r\n  userPasswordForm.addEventListener('submit', async (e) => {\r\n    e.preventDefault();\r\n\r\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\r\n\r\n    const passwordConfirm = document.getElementById('password-confirm').value;\r\n    const passwordCurrent = document.getElementById('password-current').value;\r\n    const password = document.getElementById('password').value;\r\n\r\n    await updateSetting(\r\n      { passwordCurrent, password, passwordConfirm },\r\n      'password'\r\n    );\r\n  });\r\n\r\n  document.querySelector('.btn--save-password').textContent = 'Save Password';\r\n  document.getElementById('password-current').value = '';\r\n  document.getElementById('password-confirm').value = '';\r\n  document.getElementById('password').value = '';\r\n}\r\n\r\nif (bookBtn) {\r\n  bookBtn.addEventListener('click', (e) => {\r\n    e.target.textContent = 'Processing...';\r\n    const { tourId } = e.target.dataset;\r\n    bookTour(tourId);\r\n  });\r\n}\r\n","import axios from 'axios';\r\nimport {showAlert} from './alerts'\r\n\r\nexport const updateSetting = async (data, type) => {\r\n   \r\n    try {\r\n        \r\n        const url =\r\n          type === 'password'\r\n            ? 'http://127.0.0.1:8000/api/v1/users/updatemypassword'\r\n            : 'http://127.0.0.1:8000/api/v1/users/updateMe';\r\n        const res = await axios({\r\n            method: 'PATCH',\r\n            url,\r\n            data\r\n        });\r\n        \r\n        if (res.data.status === 'success') {\r\n            showAlert('success', `${type.toUpperCase()} updated successfully!`)\r\n        }\r\n    } catch (error) {\r\n        showAlert('error', err.response.data.message)\r\n    }\r\n};\r\n\r\n\r\n\r\n","/* eslint-disable */\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n","\r\n/* eslint-disable*/\r\nimport axios from 'axios'\r\nconst stripe = Stripe(\r\n  'pk_test_51Mk4sRBFd9Mb1hZkR2t1Pz19Bv6pQD00KfxfZ1ntKVwNTWtIoOy0IN4qGufIC7hZpB1LVW96dUL3XRCt1XbAw4L400efjT9qzq'\r\n);\r\n\r\nexport const bookTour = async tourId => {\r\n   \r\n    const session = await axios(\r\n      `http://127.0.0.1:8000/api/v1/bookings/checkout-sesssion/${tourId}`\r\n    );\r\n  \r\n    await stripe.redirectToCheckout({\r\n        sessionId:session.data.session.id\r\n    })\r\n}","/* eslint-disable */\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nconst loginForm = document.querySelector('.formlog');\r\nconst logoutbtn = document.querySelector('.nav__el--logout')\r\n\r\n\r\nif(loginForm){\r\n  try {\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://127.0.0.1:8000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in succussfuly');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n\r\nif (logoutbtn) {\r\n    logoutbtn.addEventListener('click', async () => {\r\n      try {\r\n    const res = await axios({\r\n      method: 'GET',\r\n      url: 'http://127.0.0.1:8000/api/v1/users/logout',\r\n    });\r\n    if ((res.data.status = 'success')) {\r\n      location.reload(true);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', 'Error logging out! Try again');\r\n  }\r\n  });\r\n}","/* eslint-disable*/\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1Ijoic2FtdWVsd2ViYWxlbSIsImEiOiJjbGRrbjVjYnMwMzN0M3BycTBpdzhtcmJpIn0.chrSskLY82sls7ohRIuPSg';\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/samuelwebalem/cldktrydk000001mwynibfg38',\r\n    scrollZoom: false,\r\n  });\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n    new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    new mapboxgl.Popup({\r\n      offset: 30,\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>${loc.day} days: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 100,\r\n      right: 100,\r\n    },\r\n  });\r\n\r\n}\r\n  ","/* eslint-disable*/\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nconst signinForm = document.querySelector('.formsign');\r\n\r\nexport const signup = async (email,password,name,passwordConfirm) => {\r\n   try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://127.0.0.1:8000/api/v1/users/signup',\r\n      data: {\r\n        email,\r\n        password,\r\n        name,\r\n        passwordConfirm,\r\n      },\r\n    });\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Signed up succussfuly');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n}\r\n\r\n \r\n"],"names":[],"version":3,"file":"bundle.js.map","sourceRoot":"../../"}